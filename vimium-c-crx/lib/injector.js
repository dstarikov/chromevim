"use strict";var VimiumInjector=VimiumInjector||{id:"",alive:-1,host:"",version:"",versionHash:"",clickable:void 0,reload:null,checkIfEnabled:null,$run:null,$_run:null,$priv:null,getCommandCount:null,destroy:null};(function(t,n){function e(t){var e,i,l,s,f,m,v,h,p,b,E,C,k,T,w,L,$=u.lastError;if(t||(l=$&&$.message,s=u.id||location.host||location.protocol,i=!!(l&&l.lastIndexOf("not exist")>=0&&u.id),false===t?e=": not in the white list.":!i&&$?e=l?":\n\t"+l:": no backend found.":a>3?(e=l?":\n\t"+l:": retried but failed ("+t+").",i=false):(setTimeout(o,200*a),a++,i=true),i||(f="color:red",m="color:auto",console.log("%cVimium C%c: %cfail%c to inject into %c%s%c %s",f,m,f,m,"color:#0c85e9",s,m,e||" ("+a+" retries)."))),v=VimiumInjector&&VimiumInjector.clickable,VimiumInjector&&"function"===typeof VimiumInjector.destroy&&VimiumInjector.destroy(true),VimiumInjector={id:d,alive:0,host:d,version:t?t.version:"",versionHash:t?t.versionHash:"",clickable:v,reload:n(r),checkIfEnabled:null,$run:function(t){VimiumInjector&&VimiumInjector.$_run(t.t)},$_run:function(){},$priv:null,getCommandCount:null,destroy:null},h=document.documentElement,!t||!(h instanceof HTMLHtmlElement))return $;for(b=(p=document.contains(c)?c:(document.head||h).lastChild).nextSibling,E=p.parentElement,C=[],k=0,T=t.scripts;k<T.length;k++)w=T[k],(L=document.createElement("script")).type="text/javascript",L.async=false,L.src=w,E.insertBefore(L,b),C.push(L);C.length>0&&(C[C.length-1].onload=function(){this.onload=null;for(var t=C.length;0<=--t;)C[t].remove()})}function o(){u.sendMessage(d,{handler:99,scripts:true},e)}function i(){removeEventListener("DOMContentLoaded",i),!s||s instanceof Element?setTimeout(o,67):s(function(){s(function(){setTimeout(o,0)},{timeout:67})},{timeout:330})}var u=chrome.runtime,c=document.currentScript,r=c.src,l=r.indexOf("://")+3,s=window.requestIdleCallback,a=1,d=r.substring(l,r.indexOf("/",l));VimiumInjector.id=d,"loading"!==document.readyState?i():addEventListener("DOMContentLoaded",i,true)})(0,function(t){return function(n){function e(){var e,o=document.documentElement;o&&((e=document.createElement("script")).type="text/javascript",e.async=false,e.src=t,console.log("%cVimium C%c begins to reload%s.","color:red","color:auto",1===n?" because it has been updated.":""),(document.head||document.body||o).appendChild(e))}var o,i=VimiumInjector;i&&(o=i.clickable,"function"===typeof i.destroy&&i.destroy(true),i.clickable=o),n?setTimeout(e,200):e()}}),(!document.currentScript||"false"!==(document.currentScript.dataset.vimiumHooks||"").toLowerCase())&&null!==VimiumInjector.clickable&&(function(){var t,n,e,o,i,u,c,r,l;VimiumInjector.clickable=VimiumInjector.clickable?VimiumInjector.clickable:window.WeakSet?new WeakSet:{add:function(t){return t.vimiumHasOnclick=true,this},has:function(t){return!!t.vimiumHasOnclick},delete:function(t){var n=t.vimiumHasOnclick;return n&&(t.vimiumHasOnclick=false),!!n}},t=EventTarget,true!==(e=(n=t.prototype).addEventListener).vimiumHooked&&(o=HTMLAnchorElement,i=Element,u=n.addEventListener=function addEventListener(t,n){var u,c,r;return"click"===t&&!(this instanceof o)&&n&&this instanceof i&&(u=VimiumInjector)&&u.clickable&&u.clickable.add(this),2===(r=(c=arguments).length)?e.call(this,t,n):3===r?e.call(this,t,n,c[2]):e.apply(this,c)},c=Function.prototype,r=c.toString,l=c.toString=function toString(){return r.apply(this===u?e:this===l?r:this,arguments)},u.vimiumHooked=true,t.vimiumRemoveHooks=function(){delete t.vimiumRemoveHooks,n.addEventListener===u&&(n.addEventListener=e),c.toString===l&&(c.toString=r)},u.prototype=l.prototype=void 0)})();